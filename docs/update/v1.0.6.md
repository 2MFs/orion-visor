## v1.0.6

> sql 脚本 - DDL

```sql
-- 数据分组添加 userId
ALTER TABLE `data_group` 
ADD COLUMN `user_id` bigint(0) NULL COMMENT '用户id' AFTER `type`,
MODIFY COLUMN `name` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '组名称' AFTER `user_id`,
DROP INDEX `idx_type`,
ADD INDEX `idx_type_user`(`type`, `user_id`) USING BTREE;

ALTER TABLE `data_group_rel` 
MODIFY COLUMN `type` char(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '组类型' AFTER `id`,
ADD COLUMN `user_id` bigint(0) NULL COMMENT '用户id' AFTER `type`,
DROP INDEX `idx_type`,
ADD INDEX `idx_type_user`(`type`, `user_id`) USING BTREE;
```

> sql 脚本 - DML

```sql
-- 设置数据分组 user_id
UPDATE data_group SET user_id = 0;
UPDATE data_group_rel SET user_id = 0;
```

> sql 脚本 - 命令分组初始化

```sql
-- 插入命令片段分组
INSERT INTO `data_group` (`parent_id`, `type`, `user_id`, `name`, `sort`, `creator`, `updater`, `deleted`) 
SELECT 0, 'COMMAND_SNIPPET', user_id, name, id, creator, updater, deleted
FROM command_snippet_group;

-- 需要命令分组 groupId
UPDATE command_snippet s
LEFT JOIN data_group g ON g.type = 'COMMAND_SNIPPET' AND g.sort = s.group_id
SET s.group_id = g.id;

-- 删除命令片段分组表
DROP TABLE command_snippet_group;
```
